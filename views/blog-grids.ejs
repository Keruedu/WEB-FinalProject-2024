<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog Grids | Play Tailwind</title>
  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="/css/animate.css" />
  <link rel="stylesheet" href="/css/tailwind.css" />

  <!-- ==== WOW JS ==== -->
  <script src="/js/wow.min.js"></script>
  <script>
    new WOW().init();
  </script>
</head>

<body>
  <!-- ====== Navbar Section Start -->
  <%- include('partials/navbar') %>
  <!-- ====== Navbar Section End -->

  <!-- ====== Banner Section Start -->
  <div class="relative z-10 overflow-hidden pt-[120px] pb-[60px] md:pt-[130px] lg:pt-[160px] dark:bg-dark">
    <div
      class="absolute bottom-0 left-0 w-full h-px bg-gradient-to-r from-stroke/0 via-stroke dark:via-dark-3 to-stroke/0">
    </div>
    <div class="container">
      <div class="flex flex-wrap items-center -mx-4">
        <div class="w-full px-4">
          <div class="text-center">
            <h1 class="mb-4 text-3xl font-bold text-dark dark:text-white sm:text-4xl md:text-[40px] md:leading-[1.2]">
              Blog Grid</h1>
            <p class="mb-5 text-base text-body-color dark:text-dark-6">
              There are many variations of passages of Lorem Ipsum available.
            </p>

            <ul class="flex items-center justify-center gap-[10px]">
              <li>
                <a href="/index"
                  class="flex items-center gap-[10px] text-base font-medium text-dark dark:text-white">
                  Home
                </a>
              </li>
              <li>
                <a href="javascript:void(0)" class="flex items-center gap-[10px] text-base font-medium text-body-color">
                  <span class="text-body-color dark:text-dark-6"> / </span>
                  Blog Grid
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ====== Banner Section End -->

  <!-- ====== Blog Section Start -->
  <section class="pt-20 pb-10 lg:pt-[80px] lg:pb-20 dark:bg-dark">
    <div class="container">
      <form action="/search" method="GET" class="flex flex-wrap items-center justify-center gap-4 pb-20 w-full md:w-[80%] mx-auto">
        <input type="text" name="search" placeholder="Search blogs..." value="<%= search %>"
          class="w-full md:w-auto px-5 py-3 text-base transition bg-transparent border rounded-md outline-none border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 placeholder:text-dark-6 focus:border-primary dark:focus:border-primary focus-visible:shadow-none" />
        <select name="filter" class="w-full md:w-auto px-5 py-3 text-base transition bg-transparent border rounded-md outline-none border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 focus:border-primary dark:focus:border-primary focus-visible:shadow-none" onchange="this.form.submit()">
          <option value="" <%= filter === '' ? 'selected' : '' %>>All</option>
          <option value="latest" <%= filter === 'latest' ? 'selected' : '' %>>Latest</option>
          <option value="oldest" <%= filter === 'oldest' ? 'selected' : '' %>>Oldest</option>
          <option value="popular" <%= filter === 'popular' ? 'selected' : '' %>>Most Popular</option>
        </select>
        
        <select name="category" class="w-full md:w-auto px-5 py-3 text-base transition bg-transparent border rounded-md outline-none border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 focus:border-primary dark:focus:border-primary focus-visible:shadow-none">
          <option value="">All Categories</option>
          <% categories.forEach(category => { %>
            <option value="<%= category._id %>" <%= selectedCategory === category._id.toString() ? 'selected' : '' %>><%= category.name %></option>
          <% }); %>
        </select>

        <select name="timeRange" class="w-full md:w-auto px-5 py-3 text-base transition bg-transparent border rounded-md outline-none border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 focus:border-primary dark:focus:border-primary focus-visible:shadow-none" onchange="this.form.submit()">
          <option value="">All Time</option>
          <option value="24h" <%= timeRange === '24h' ? 'selected' : '' %>>Last 24 Hours</option>
          <option value="week" <%= timeRange === 'week' ? 'selected' : '' %>>Last Week</option>
          <option value="month" <%= timeRange === 'month' ? 'selected' : '' %>>Last Month</option>
          <option value="year" <%= timeRange === 'year' ? 'selected' : '' %>>Last Year</option>
        </select>

        <div class="relative w-full md:w-auto">
          <button type="button" id="dropdownButton" class="w-full md:w-auto px-5 py-3 text-base text-white transition duration-300 ease-in-out border rounded-md cursor-pointer border-primary bg-primary hover:bg-blue-dark">Tags</button>
      
          <div id="dropdown" class="hidden h-[160px] overflow-auto flex-col gap-2 mt-4 absolute z-10 p-2 bg-white border border-stroke rounded-md shadow-lg scrollbar-hide">
            <% tags.forEach(tag => { %>
              <label class="flex items-center">
                <input type="checkbox" name="tags" value="<%= tag._id %>" <%= selectedTags.includes(tag._id.toString()) ? 'checked' : '' %> />
                <span class="ml-2"><%= tag.name %></span>
              </label>
            <% }); %>
          </div>
        </div>
      
        <button type="submit" class="w-full md:w-auto px-5 py-3 text-base text-white transition duration-300 ease-in-out border rounded-md cursor-pointer border-primary bg-primary hover:bg-blue-dark">Search</button>
      </form>
      <div class="flex flex-wrap -mx-4">
        
        <% blogs.forEach(blog => { %>
          <div class="w-full px-4 md:w-1/2 lg:w-1/3">
            <div class="mb-10 wow fadeInUp group" data-wow-delay=".1s">
              <div class="mb-8 overflow-hidden rounded-[5px] w-full">
                <a href="/blog/<%= blog._id %>" class="block max-h-60">
                  <img src="<%= blog.imageUrl %>" alt="image"
                    class="w-full transition group-hover:rotate-6 group-hover:scale-125 object-cover object-center" />
                </a>
              </div>
              <div>
                <div class="flex flex-row justify-between mb-6">
                  <span
                  class="inline-block px-4 py-0.5 text-xs font-medium leading-loose text-center text-white rounded-[5px] bg-primary">
                  <%= blog.date.toDateString() %>
                  </span>
                  <div class="flex flex-row gap-5">
                    <!-- view -->
                    <p class="flex items-center text-sm font-medium text-dark dark:text-white">
                      <span class="mr-3">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-current">
                          <path d="M7.9998 5.92505C6.8498 5.92505 5.9248 6.85005 5.9248 8.00005C5.9248 9.15005 6.8498 10.075 7.9998 10.075C9.1498 10.075 10.0748 9.15005 10.0748 8.00005C10.0748 6.85005 9.1498 5.92505 7.9998 5.92505ZM7.9998 8.95005C7.4748 8.95005 7.0498 8.52505 7.0498 8.00005C7.0498 7.47505 7.4748 7.05005 7.9998 7.05005C8.5248 7.05005 8.9498 7.47505 8.9498 8.00005C8.9498 8.52505 8.5248 8.95005 7.9998 8.95005Z"></path>
                          <path d="M15.3 7.1251C13.875 5.0001 11.9 2.8501 8 2.8501C4.1 2.8501 2.125 5.0001 0.7 7.1251C0.35 7.6501 0.35 8.3501 0.7 8.8751C2.125 10.9751 4.1 13.1501 8 13.1501C11.9 13.1501 13.875 10.9751 15.3 8.8751C15.65 8.3251 15.65 7.6501 15.3 7.1251ZM14.375 8.2501C12.55 10.9251 10.725 12.0251 8 12.0251C5.275 12.0251 3.45 10.9251 1.625 8.2501C1.525 8.1001 1.525 7.9001 1.625 7.7501C3.45 5.0751 5.275 3.9751 8 3.9751C10.725 3.9751 12.55 5.0751 14.375 7.7501C14.45 7.9001 14.45 8.1001 14.375 8.2501Z"></path>
                        </svg>
                      </span>
                      <%= blog.views %>
                    </p>
                    <!--Category-->
                    <span
                    class="inline-block px-4 py-0.5 text-xs font-medium leading-loose text-center text-white rounded-[5px] bg-secondary">
                      <%= blog.category.name %>
                    </span>
                  </div>
                </div>
                <h3>
                  <a href="/blog/<%= blog._id %>"
                    class="inline-block mb-4 text-xl font-semibold text-dark dark:text-white hover:text-primary dark:hover:text-primary sm:text-2xl lg:text-xl xl:text-2xl">
                    <%= blog.title %>
                  </a>
                </h3>
                <p class="max-w-[370px] text-base text-body-color dark:text-dark-6">
                  <%= blog.content.substring(0, 100) %>...
                </p>
              </div>
            </div>
          </div>
        <% }) %>
        
    </div>

    <div class="mt-8 text-center wow fadeInUp" data-wow-delay=".2s">
      <div class="inline-flex p-3 bg-white dark:bg-dark-2 border rounded-[10px] border-stroke dark:border-dark-3">
        <ul class="flex items-center -mx-1">
          <% 
            const generateUrl = (page) => {
              let url = '';
              if (search || filter || selectedCategory || selectedTags.length > 0) {
                url = '/search?';
                if (search) url += 'search=' + encodeURIComponent(search) + '&';
                if (filter) url += 'filter=' + encodeURIComponent(filter) + '&';
                if (selectedCategory) url += 'category=' + encodeURIComponent(selectedCategory) + '&';
                if (selectedTags.length > 0) {
                  selectedTags.forEach(tag => {
                    url += 'tags=' + encodeURIComponent(tag) + '&';
                  });
                }
                url += 'page=' + page;
              } else {
                url = '/blogs/page/' + page;
              }
              return url;
            };
          %>
          <% if (hasPreviousPage) { %>
            <li class="px-1">
              <a href="<%= generateUrl(previousPage) %>"
                class="flex items-center justify-center text-base bg-transparent border rounded-md hover:border-primary hover:bg-primary h-[34px] w-[34px] border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 hover:text-white dark:hover:border-primary dark:hover:text-white">
                <span>
                  <svg width="8" height="15" viewBox="0 0 8 15" class="fill-current stroke-current">
                    <path
                      d="M7.12979 1.91389L7.1299 1.914L7.1344 1.90875C7.31476 1.69833 7.31528 1.36878 7.1047 1.15819C7.01062 1.06412 6.86296 1.00488 6.73613 1.00488C6.57736 1.00488 6.4537 1.07206 6.34569 1.18007L6.34564 1.18001L6.34229 1.18358L0.830207 7.06752C0.830152 7.06757 0.830098 7.06763 0.830043 7.06769C0.402311 7.52078 0.406126 8.26524 0.827473 8.73615L0.827439 8.73618L0.829982 8.73889L6.34248 14.6014L6.34243 14.6014L6.34569 14.6047C6.546 14.805 6.88221 14.8491 7.1047 14.6266C7.30447 14.4268 7.34883 14.0918 7.12833 13.8693L1.62078 8.01209C1.55579 7.93114 1.56859 7.82519 1.61408 7.7797L1.61413 7.77975L1.61729 7.77639L7.12979 1.91389Z"
                      stroke-width="0.3" />
                  </svg>
                </span>
              </a>
            </li>
          <% } %>
          <% for (let i = 1; i <= lastPage; i++) { %>
            <li class="px-1">
              <a href="<%= generateUrl(i) %>"
                class="flex items-center justify-center text-base bg-transparent border rounded-md h-[34px] w-[34px] border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 hover:border-primary hover:bg-primary hover:text-white dark:hover:border-primary dark:hover:text-white <%= currentPage === i ? 'bg-primary text-white' : '' %>">
                <%= i %>
              </a>
            </li>
          <% } %>
          <% if (hasNextPage) { %>
            <li class="px-1">
              <a href="<%= generateUrl(nextPage) %>"
                class="flex items-center justify-center text-base bg-transparent border rounded-md hover:border-primary hover:bg-primary h-[34px] w-[34px] border-stroke dark:border-dark-3 text-body-color dark:text-dark-6 hover:text-white dark:hover:border-primary dark:hover:text-white">
                <span>
                  <svg width="8" height="15" viewBox="0 0 8 15" class="fill-current stroke-current">
                    <path
                      d="M0.870212 13.0861L0.870097 13.086L0.865602 13.0912C0.685237 13.3017 0.684716 13.6312 0.895299 13.8418C0.989374 13.9359 1.13704 13.9951 1.26387 13.9951C1.42264 13.9951 1.5463 13.9279 1.65431 13.8199L1.65436 13.82L1.65771 13.8164L7.16979 7.93248C7.16985 7.93243 7.1699 7.93237 7.16996 7.93231C7.59769 7.47923 7.59387 6.73477 7.17253 6.26385L7.17256 6.26382L7.17002 6.26111L1.65752 0.398611L1.65757 0.398563L1.65431 0.395299C1.454 0.194997 1.11779 0.150934 0.895299 0.373424C0.695526 0.573197 0.651169 0.908167 0.871667 1.13067L6.37922 6.98791C6.4442 7.06886 6.43141 7.17481 6.38592 7.2203L6.38587 7.22025L6.38271 7.22361L0.870212 13.0861Z"
                      stroke-width="0.3" />
                  </svg>
                </span>
              </a>
            </li>
          <% } %>
        </ul>
      </div>
    </div>
  </section>
  <!-- ====== Blog Section End -->

  <!-- ====== Footer Section Start -->
  <%- include('partials/footer') %>
  <!-- ====== Footer Section End -->

  <!-- ====== Back To Top Start -->
  <a href="javascript:void(0)"
    class="back-to-top fixed bottom-8 right-8 left-auto z-[999] hidden h-10 w-10 items-center justify-center rounded-md bg-primary text-white shadow-md transition duration-300 ease-in-out hover:bg-dark">
    <span class="mt-[6px] h-3 w-3 rotate-45 border-t border-l border-white"></span>
  </a>
  <!-- ====== Back To Top End -->

  <!-- ====== Made With Button Start -->
  <!-- <a target="_blank" rel="nofollow noopener"
    class="inline-flex items-center gap-[10px] py-2 px-[14px] rounded-lg bg-white dark:bg-dark-2 shadow-2 fixed bottom-8 left-4 sm:left-9 z-[999]"
    href="https://tailgrids.com/">
    <span class="text-base font-medium text-dark-3 dark:text-dark-6">
      Made with
    </span>
    <span class="block w-px h-4 bg-stroke dark:bg-dark-3"></span>
    <span class="block max-w-[88px] w-full">
      <img src="/images/brands/tailgrids.svg" alt="tailgrids" class="dark:hidden">
      <img src="/images/brands/tailgrids-white.svg" alt="tailgrids" class="hidden dark:block">
    </span>
  </a> -->
  <!-- ====== Made With Button End -->

  <!-- ====== All Scripts -->
  <script src="/js/main.js"></script>
</body>

</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Grids</title>
  <link rel="stylesheet" href="/css/tailwind.css">
</head>
<body>
  <div class="container mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <% blogs.forEach(blog => { %>
        <div class="mb-10 wow fadeInUp group" data-wow-delay=".1s">
          <div class="mb-8 overflow-hidden rounded-[5px]">
            <a href="/<%= blog._id %>" class="block">
              <img src="<%= blog.imageUrl %>" alt="image" class="w-full transition group-hover:rotate-6 group-hover:scale-125" />
            </a>
          </div>
          <div>
            <span class="inline-block px-4 py-0.5 mb-6 text-xs font-medium leading-loose text-center text-white rounded-[5px] bg-primary">
              <%= blog.date.toDateString() %>
            </span>
            <h3>
              <a href="/<%= blog._id %>" class="inline-block mb-4 text-xl font-semibold text-dark dark:text-white hover:text-primary dark:hover:text-primary sm:text-2xl lg:text-xl xl:text-2xl">
                <%= blog.title %>
              </a>
            </h3>
            <p class="max-w-[370px] text-base text-body-color dark:text-dark-6">
              <%= blog.content.substring(0, 100) %>...
            </p>
          </div>
        </div>
      <% }) %>
    </div>
  </div>
</body>
</html> -->

<script>
  document.getElementById('dropdownButton').addEventListener('click', function() {
    var dropdown = document.getElementById('dropdown');
    if (dropdown.classList.contains('hidden')) {
      dropdown.classList.remove('hidden');
      dropdown.classList.add('flex');
    } else {
      dropdown.classList.add('hidden');
    }
  });

  
</script>